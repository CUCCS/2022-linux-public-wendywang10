# H4 shell脚本编程基础实验
## 实验自查
### 任务一：用bash编写一个图片批处理脚本，实现以下功能：
- [x] 支持命令行参数方式使用不同功能
- [x] 支持对指定目录下所有支持格式的图片文件进行批处理
- [x] 支持以下常见图片批处理功能的单独使用或组合使用
- [x]  支持对jpeg格式图片进行图片质量压缩
- [x] 支持对jpeg/png/svg格式图片在保持原始宽高比的前提下压缩分辨率
- [x] 支持对图片批量添加自定义文本水印
- [x] 支持批量重命名（统一添加文件名前缀或后缀，不影响原始文件扩展名）
- [x] 支持将png/svg图片统一转换为jpg格式图片

### 任务二：用bash编写一个文本批处理脚本，对以下附件分别进行批量处理完成相应的数据统计任务：
- [x] 统计不同年龄区间范围（20岁以下、[20-30]、30岁以上）的球员数量、百分比
- [x] 统计不同场上位置的球员数量、百分比
- [x] 名字最长的球员是谁？名字最短的球员是谁？
- [x] 年龄最大的球员是谁？年龄最小的球员是谁？

### 任务三：用bash编写一个文本批处理脚本，对以下附件分别进行批量处理完成相应的数据统计任务：
- [x] Web服务器访问日志
- [x] 统计访问来源主机TOP 100和分别对应出现的总次数
- [x] 统计访问来源主机TOP 100 IP和分别对应出现的总次数
- [x] 统计最频繁被访问的URL TOP 100
- [x] 统计不同响应状态码的出现次数和对应百分比
- [x] 分别统计不同4XX状态码对应的TOP 10 URL和对应出现的总次数
- [x] 给定URL输出TOP 100访问来源主机
- - -
## 实验过程
### 任务一：
安装一些需要的程序：
```
sudo apt-get update && sudo apt-get install -y shellcheck
sudo apt-get install -y imagemagick
```
编写脚本见附件
操作指令：
```
bash task1.sh -h
bash task1.sh -c 20
bash task1.sh -r 50
bash task1.sh -w 20 hello
bash task1.sh -p pre
bash task1.sh -s suf
bash task1.sh -j
```
![任务一](/img/任务一.png)
### 任务二：
下载文件直接写入了脚本之中
```
bash task2.sh -h
bash task2.sh -a
bash task2.sh -p
bash task2.sh -n
bash task2.sh -c
bash task2.sh -d
```
![任务二](/img/任务二.png)
### 任务三：
下载并解压文件直接写入了脚本之中
```
bash task3.sh -h
bash task3.sh -a
bash task3.sh -p
bash task3.sh -n
bash task3.sh -c
bash task3.sh -d
```
![任务三](/img/任务三.png)
## 遇到的问题与解决方案
1.VScode连接不上虚拟机
错误一：远程连接失败
方法一：在VScode按Ctrl+Shift+p打开，输入remote-ssh:settings,在setting.json中编辑remote.SSH.useLocalServer:True
错误二：超时
目前有看到推荐改变server和VScode版本的问题，但我目前还未尝试成功
2.有关“给定URL输出TOP 100访问来源主机”的if判断语句不太会写，这里参考了同学的仓库。
## 参考
[VScode配接虚拟机失败](https://blog.csdn.net/weilin731/article/details/119778478)
[同学的仓库](https://github.com/CUCCS/2022-linux-public-dangyuyan/blob/chap0x04/chap0x04/chap0x04.md)